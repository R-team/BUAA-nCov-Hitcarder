<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">

    <title>BUAA 打卡</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/starter-template/">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">

    <link href="bootstrap-social.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Favicons -->
<link rel="apple-touch-icon" href="/docs/4.4/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/docs/4.4/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/docs/4.4/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/docs/4.4/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="/docs/4.4/assets/img/favicons/safari-pinned-tab.svg" color="#563d7c">
<link rel="icon" href="/docs/4.4/assets/img/favicons/favicon.ico">
<meta name="msapplication-config" content="/docs/4.4/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#563d7c">


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="/index.html">nCov 打卡</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/index.html">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/timfaner/BUAA-nCov-Hitcarder">Github Repo</a>
      </li>


    </ul>

  </div>
</nav>

<div class="alert alert-success alert-dismissible" id="alert-success">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <strong>成功!</strong> 表单提交成功！
</div>

<div class="alert alert-warning alert-dismissible" id="alert-warning">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <strong>出问题了!</strong> 表单提交失败😭！
</div>

<div class="jumbotron">
  <div class="container">

    <div class="starter-template">
      <h1>这是什么？</h1>
      <p class="lead">自动帮你打卡，报告你的身体状况<br>把时间放在更有价值的事情上
        <br> 你需要做的所有事情就是给我们一个star
        
      </p>
    </div>
  </div><!-- /.container -->
  </div>
<div class="container" id="form" >
  <div class="row align-items-center">
    <div class="col">
      <div align="center ">
      <h2>请输入右侧相关信息</h2>
      <p class="lead">邮箱地址、手机号码用来接收打卡通知<br>我们会严格保护你的账号密码安全
        
      </p>
      </div>
    </div>
    <div class="col">
      <div >
        <form id="form-content">
          <p>        
            <div class="form-group">
            <label for="email">邮箱地址*:</label>
            <input required="required" type="email" class="form-control" name="email">
          </div></p>

          <div class="form-group">
            <label for="phone">手机号码:</label>
            <input  type="text" class="form-control" name="phone">
          </div></p>
      
                  <div class="form-group">
            <label for="pwd">统一认证账号*:</label>
            <input required="required" type="text" class="form-control" name="sso_username">
          </div>
      
          <div class="form-group">
            <label for="pwd">统一认证密码*:</label>
            <input required="required" type="password" class="form-control" name="sso_password">
          </div>
      

        </form>
        <div align="center">
          <button   class="btn btn-primary" id="summit-btn">Submit</button>
        </div>
      </div>
    </div>
  </div>

</div>

<div class="container align-items-center" id="inform">
  <div class="starter-template">
    <h1 align="center" >成功登记</h1>
    <p class="lead">每天早上8点自动打卡,<s>届时会有邮件通知</s><small>(功能开发中）</small>
  </div>

</div>



<script src="https://code.jquery.com/jquery-3.4.1.min.js"  crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="/docs/4.4/assets/js/vendor/jquery.min.js"><\/script>')</script>
      <script src="https://cdn.bootcss.com/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    
      <script>
$("#inform")[0].hidden = true
$("#alert-success")[0].hidden = true
$("#alert-warning")[0].hidden = true
        function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
            var r = window.location.search.substr(1).match(reg);  //匹配目标参数
            if (r != null) return unescape(r[2]); return null; //返回参数值
        }
          
        $(function() {

 $("button#summit-btn").click(function(){

   if ($("#form-content")[0].checkValidity()) {
     $.ajax({
          type: "GET",
          url: "/hitcarder/record",
          data: $('form').serialize() + "&github_username=" + getUrlParam("user"),

          success:function(msg){
            if(msg.code == 200){
              $("#form")[0].hidden =true
              $("#inform")[0].hidden = false
            }
            else{
              $("#alert-success")[0].hidden = false
            }
            
          },
          error:function(msg){
            alert("网络似乎有点问题");
            $("#alert-warning")[0].hidden = false
          }
     }

       
       );}

   else{
     alert("请检查邮件格式");
   }

 });
});
        
        
        
        </script>
    
    </body>



</html>
